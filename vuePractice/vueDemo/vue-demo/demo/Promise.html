<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>promise</title>

</head>
<body>
  <h1>promise</h1>

<script>
  let checkLogin=function(){
    return new Promise(function(resolve,reject){ //必须return 返回Promise对象
      let flag='';
      //let flag=document.cookie.indexOf("userId")>-1?true:false;
      if(flag=true){
        resolve({//成功事件
          status:0,
          result:true
        })
      }else{
        reject('error')//失败事件
      }
    })
  }
let getUserInfo=()=>{
    return new Promise((resolve,reject)=>{
      let userInfo={
        userId:'101'
      }
      resolve(userInfo);
    })
}
  checkLogin().then(function(res){
    if(res.status==0){
      console.log('login success');
      return getUserInfo();
    }
  }).catch(error=>{
    console.log(`error:${error}`);
  }).then(res1=>{
    console.log(`userId:${res1.userId}`);
  })

  Promise.all([checkLogin(),getUserInfo()]).then(([res1,res2])=>{
    console.log(`res1:${res1.result}res2:${res2.userId}`);
  })
</script>
</body>
</html>
